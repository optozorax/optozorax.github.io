<!DOCTYPE html>
<html lang="ru">

<head>
  <!-- Fonts preload -->
  <link rel="preload" as="font" href="/fonts/Rubik/iJWKBXyIfDnIV7nFrXyi0A.woff2" crossOrigin="anonymous">
  <link rel="preload" as="font" href="/fonts/Rubik/iJWKBXyIfDnIV7nBrXw.woff2" crossOrigin="anonymous">
  <link rel="preload" as="font" href="/fonts/JetBrainsMono/tDbv2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKwBNntkaToggR7BYRbKPxDcwg.woff2" crossOrigin="anonymous">
  <link rel="preload" as="font" href="/fonts/JetBrainsMono/tDbv2o-flEEny0FZhsfKu5WU4zr3E_BX0PnT8RD8yKwBNntkaToggR7BYRbKPxTcwhsk.woff2" crossOrigin="anonymous">
  <!-- --- -->

  <!-- CSS -->
  <link rel="stylesheet" href="/main.css">
  <!-- --- -->

  
  <!-- Yandex.Metrika counter -->
  <script type="text/javascript" > (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)}; m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)}) (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym"); ym(53392057, "init", { clickmap:true, trackLinks:true, accurateTrackBounce:true, webvisor:true }); </script> <noscript><div><img src="https://mc.yandex.ru/watch/53392057" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
  <meta name="yandex-verification" content="ec61b5ac4464201b" />
  <!-- --- -->
  

  <!-- Non social metatags -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#157878">
  <link rel="canonical" href="https://optozorax.github.io/">
  <meta name="robots" content="noarchive">
  <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/atom.xml"> 
  <!-- --- -->

  <!-- Social metatags -->
  

<meta name="author" content="optozorax">
<meta name="title" content="–ü—Ä–∏–º–µ–Ω–µ–Ω–∏—è std::function ‚Äî –ë–ª–æ–≥ optozorax&#x27;–∞">
<meta name="description" content="–†–∞—Å—Å–∫–∞–∑—ã–≤–∞—é –∫–∞–∫ —É–ª—É—á—à–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏ –ª—è–º–±–¥–∞-—Ñ—É–Ω–∫—Ü–∏–π.">
<meta name="image" content="https://optozorax.github.io/p/std-function/preview.png">

<meta name="keywords" itemprop="tags" content="–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ, c++">


<!-- Facebook Meta Tags -->
<meta property="og:url" content="https://optozorax.github.io/p/std-function/">
<meta property="og:type" content="article">
<meta property="og:title" content="–ü—Ä–∏–º–µ–Ω–µ–Ω–∏—è std::function ‚Äî –ë–ª–æ–≥ optozorax&#x27;–∞">
<meta property="og:description" content="–†–∞—Å—Å–∫–∞–∑—ã–≤–∞—é –∫–∞–∫ —É–ª—É—á—à–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏ –ª—è–º–±–¥–∞-—Ñ—É–Ω–∫—Ü–∏–π.">
<meta property="og:image" content="https://optozorax.github.io/p/std-function/preview.png">
<meta property="og:locale" content="ru">


<meta property="article:published_time" content="2019-01-30">




<meta property="article:tag" content="–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ">

<meta property="article:tag" content="c++">



<!-- Twitter Meta Tags -->
<meta name="twitter:card" content="summary_large_image">
<meta property="twitter:domain" content="optozorax.github.io">
<meta property="twitter:url" content="https://optozorax.github.io/p/std-function/">
<meta name="twitter:title" content="–ü—Ä–∏–º–µ–Ω–µ–Ω–∏—è std::function ‚Äî –ë–ª–æ–≥ optozorax&#x27;–∞">
<meta name="twitter:description" content="–†–∞—Å—Å–∫–∞–∑—ã–≤–∞—é –∫–∞–∫ —É–ª—É—á—à–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏ –ª—è–º–±–¥–∞-—Ñ—É–Ω–∫—Ü–∏–π.">
<meta name="twitter:image" content="https://optozorax.github.io/p/std-function/preview.png">
<meta name="twitter:creator" content="optozorax">

  <!-- --- -->

  <!-- Extra head declarations -->
  

<script type="text/javascript" src="/js/hammer.min.js"></script>
<script type="text/javascript" src="/js/toc.js"></script>
<script type="text/javascript" src="/js/gallery.js"></script>
<script type="text/javascript" src="/js/full_screen.js"></script>
<script type="text/javascript" src="/js/word_wrap.js"></script>

  <!-- --- -->

  <!-- Favicon -->
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="shortcut icon" href="/favicon/favicon.ico">
  <link rel="manifest" href="/favicon/site.webmanifest">
  <link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#00aba9">
  <meta name="msapplication-config" content="/favicon/browserconfig.xml" />
  <!-- --- -->

  <title>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏—è std::function ‚Äî –ë–ª–æ–≥ optozorax&#x27;–∞</title>
</head>

<body>
  <!-- FullScreen block -->
  <div id="img_modal" class="modal" style="display: none;">
      <img id="img_modal_01" src="/ico/loading.gif">
      <span class="close" id="img_modal_close">&times;</span>
  </div>
  <!-- --- -->

  

<table class="toc-aligmenter"><tr><td>


  <header class="site-header" role="banner">
  
  <div class="wrapper">
    <a class="site-title" href="/">optozorax.blog</a>

    <nav class="site-nav">
      <input type="checkbox" id="nav-trigger" class="nav-trigger" />
      <label for="nav-trigger">
        <span class="menu-icon">
          <img src="/ico/menu.svg" width="13px" height="15px">
        </span>
      </label>

      <div class="trigger">
        
          <a class="page-link" href="/">–ë–ª–æ–≥</a>
        
          <a class="page-link" href="/e">–°–∏—Å—Ç–µ–º–∞—Ç–∏–∑–∞—Ü–∏—è</a>
        
          <a class="page-link" href="/tags">–¢–µ–≥–∏</a>
        
          <a class="page-link" href="/about">–û–±–æ –º–Ω–µ</a>
        
      </div>
    </nav>
  </div>
  
  </header>
  

</td><td>
</td></tr></table>



  
  
  <section class="page-header">
  

<table class="toc-aligmenter"><tr><td>


<h1 class="project-name">–ü—Ä–∏–º–µ–Ω–µ–Ω–∏—è std::function</h1>

<h2 class="project-tagline">–†–∞—Å—Å–∫–∞–∑—ã–≤–∞—é –∫–∞–∫ —É–ª—É—á—à–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏ –ª—è–º–±–¥–∞-—Ñ—É–Ω–∫—Ü–∏–π.</h2>



<span style="margin-bottom: 10px;">
  
    <a href="/tags#programmirovanie"><code class="tag"><nobr>#–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ</nobr></code></a>&nbsp;
  
    <a href="/tags#c"><code class="tag"><nobr>#c++</nobr></code></a>&nbsp;
  
</span>


<center>
<table style="margin-top: 8px;">
<tr>


<td style="padding-right: 10px; border-right: 0px solid #ffffff;">
<h2 class="project-date" style="margin-top: 0px;">
  <time datetime="2019-01-30" itemprop="datePublished">
    
    
    
    
    <span class="post-date">30 —è–Ω–≤–∞—Ä—è 2019</span>
  </time>
</h2>
</td>
<td style="padding-right: 10px; border-right: 0px solid #ffffff;">
<h2 class="project-date" style="margin-top: 0px;">
    <span class="post-date" style="font-style: normal">| üïë 12 –º–∏–Ω</span>
</h2>
</td>



</tr>
</table>


</center>


</td><td>
</td></tr></table>



  </section>
  
  

  

<table class="toc-aligmenter"><tr><td>


  <section class="main-content section">
  
<article itemscope itemtype="http://schema.org/BlogPosting">
<div itemprop="articleBody" id="content">
<h1 id="stat-ia-ob-ispol-zovanii-std-function"><a class="anchor" href="#stat-ia-ob-ispol-zovanii-std-function">#</a>–°—Ç–∞—Ç—å—è –æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ std::function</h1>
<p>–ü–æ–≤–æ–¥–æ–º –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è –¥–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç—å–∏ —Å—Ç–∞–ª–æ –∂–µ–ª–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Å—ë —Ç–æ, —á–µ–º—É —è –Ω–∞—É—á–∏–ª—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∫–æ–¥–∏–Ω–≥–∞ –ª–∞–± –ø–æ —Ç–∞–∫–∏–º –ø—Ä–µ–¥–º–µ—Ç–∞–º, –∫–∞–∫ <a href="https://github.com/optozorax/numerical_methods">–ß–∏—Å–ª–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã</a>; <a href="https://github.com/optozorax/labs_emf">–£—Ä–∞–≤–Ω–µ–Ω–∏—è –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ñ–∏–∑–∏–∫–∏</a>; <a href="https://github.com/optozorax/optimization_methods">–ú–µ—Ç–æ–¥—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏</a>. –ù–∞–¥–µ—é—Å—å —ç—Ç–∞ —Å—Ç–∞—Ç—å—è –±—É–¥–µ—Ç –ø–æ–ª–µ–∑–Ω–∞ –Ω–µ —Ç–æ–ª—å–∫–æ –ª—é–¥—è–º, –∫–æ—Ç–æ—Ä—ã–µ —É—á–∞—Ç—Å—è –≤ –ù–ì–¢–£ –Ω–∞ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–µ –§–ü–ú–ò, –Ω–æ –∏ —à–∏—Ä–æ–∫–æ–º—É –∫—Ä—É–≥—É —á–∏—Ç–∞—Ç–µ–ª–µ–π.</p>
<h1 id="vvedenie"><a class="anchor" href="#vvedenie">#</a>–í–≤–µ–¥–µ–Ω–∏–µ</h1>
<p>–í –°–∏/C++ –∏–º–µ–µ—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–∞–∫ —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é. –í—ã –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ –∑–Ω–∞–µ—Ç–µ —ç—Ç–æ—Ç —Å—Ç—Ä–∞—à–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å:</p>
<pre data-lang="c++" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-c++ "><code class="language-c++" data-lang="c++"><span style="color:#668f14;">int </span><span style="color:#c23f31;">add</span><span>(</span><span style="color:#668f14;">int </span><span style="color:#5597d6;">x</span><span>, </span><span style="color:#668f14;">int </span><span style="color:#5597d6;">y</span><span>) {
</span><span>	</span><span style="color:#72ab00;">return</span><span> x</span><span style="color:#72ab00;">+</span><span>y;
</span><span>}
</span><span>
</span><span style="color:#668f14;">void </span><span style="color:#c23f31;">call_operation</span><span>(</span><span style="color:#668f14;">int </span><span>(</span><span style="color:#72ab00;">*</span><span>operation)(</span><span style="color:#668f14;">int</span><span>, </span><span style="color:#668f14;">int</span><span>)) {
</span><span>	</span><span style="color:#668f14;">int</span><span> c </span><span style="color:#72ab00;">= </span><span style="color:#5597d6;">operation</span><span>(</span><span style="color:#b3933a;">1</span><span>, </span><span style="color:#b3933a;">2</span><span>);
</span><span>}
</span><span>
</span><span style="color:#5597d6;">call_operation</span><span>(add);
</span></code></pre>
<p>–ù–∞—á–∏–Ω–∞—è —Å C++11 –ø–æ—è–≤–∏–ª—Å—è —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º <code>std::function</code>, –æ–Ω –∏–º–µ–µ—Ç –±–æ–ª–µ–µ –∫—Ä–∞—Å–∏–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å:</p>
<pre data-lang="c++" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-c++ "><code class="language-c++" data-lang="c++"><span style="color:#72ab00;">#include </span><span style="color:#d07711;">&lt;functional&gt;
</span><span>
</span><span style="color:#668f14;">int </span><span style="color:#c23f31;">add</span><span>(</span><span style="color:#668f14;">int </span><span style="color:#5597d6;">x</span><span>, </span><span style="color:#668f14;">int </span><span style="color:#5597d6;">y</span><span>) {
</span><span>	</span><span style="color:#72ab00;">return</span><span> x</span><span style="color:#72ab00;">+</span><span>y;
</span><span>}
</span><span>
</span><span style="color:#668f14;">int </span><span style="color:#c23f31;">call_operation</span><span>(std::function&lt;</span><span style="color:#668f14;">int</span><span>(</span><span style="color:#668f14;">int</span><span>, </span><span style="color:#668f14;">int</span><span>)&gt; </span><span style="color:#5597d6;">operation</span><span>) {
</span><span>	</span><span style="color:#72ab00;">return </span><span style="color:#5597d6;">operation</span><span>(</span><span style="color:#b3933a;">1</span><span>, </span><span style="color:#b3933a;">2</span><span>);
</span><span>}
</span><span>
</span><span style="color:#668f14;">int</span><span> c </span><span style="color:#72ab00;">= </span><span style="color:#5597d6;">call_operation</span><span>(add); </span><span style="color:#7f8989;">// c = 3
</span></code></pre>
<p>–ü—Ä–∏—á—ë–º, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –°–∏, –≤ C++ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –º–æ–∂–Ω–æ –æ–ø–∏—Å—ã–≤–∞—Ç—å –ª—é–±–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç, —Ç–æ –µ—Å—Ç—å –æ–±—ä–µ–∫—Ç, –¥–æ–ø—É—Å–∫–∞—é—â–∏–π –≤—ã–∑–æ–≤ –æ–ø–µ—Ä–∞—Ü–∏–∏ <code>()</code>:</p>
<pre data-lang="c++" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-c++ "><code class="language-c++" data-lang="c++"><span style="color:#7f8989;">// ...
</span><span>
</span><span style="color:#668f14;">struct </span><span style="color:#c23f31;">Adder
</span><span>{
</span><span>	</span><span style="color:#668f14;">int </span><span style="color:#c23f31;">operator()</span><span>(</span><span style="color:#668f14;">int </span><span style="color:#5597d6;">a</span><span>, </span><span style="color:#668f14;">int </span><span style="color:#5597d6;">b</span><span>) {
</span><span>		</span><span style="color:#72ab00;">return</span><span> state </span><span style="color:#72ab00;">+</span><span> a </span><span style="color:#72ab00;">+</span><span> b;
</span><span>	}
</span><span>	
</span><span>	</span><span style="color:#668f14;">int</span><span> state;
</span><span>};
</span><span>
</span><span>Adder add </span><span style="color:#72ab00;">= </span><span>{</span><span style="color:#b3933a;">1</span><span>};
</span><span>
</span><span style="color:#668f14;">int</span><span> d </span><span style="color:#72ab00;">= </span><span style="color:#5597d6;">call_operation</span><span>(add); </span><span style="color:#7f8989;">// d = 4
</span></code></pre>
<p>–ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å <a href="https://habr.com/ru/post/66021/">–ª—è–º–±–¥—ã</a>:</p>
<pre data-lang="c++" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-c++ "><code class="language-c++" data-lang="c++"><span style="color:#7f8989;">// ...
</span><span>
</span><span style="color:#668f14;">int</span><span> state </span><span style="color:#72ab00;">= </span><span style="color:#b3933a;">2</span><span>;
</span><span>
</span><span style="color:#668f14;">int</span><span> e </span><span style="color:#72ab00;">= </span><span style="color:#5597d6;">call_operation</span><span>([</span><span style="color:#72ab00;">&amp;</span><span>](</span><span style="color:#668f14;">int</span><span> a, </span><span style="color:#668f14;">int</span><span> b) -&gt; </span><span style="color:#5597d6;">int </span><span>{
</span><span>	</span><span style="color:#72ab00;">return</span><span> state </span><span style="color:#72ab00;">+</span><span> a </span><span style="color:#72ab00;">+</span><span> b;
</span><span>}); </span><span style="color:#7f8989;">// e = 5
</span></code></pre>
<p>–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π.</p>
<h1 id="chislennoe-vychislenie-proizvodnoi"><a class="anchor" href="#chislennoe-vychislenie-proizvodnoi">#</a>–ß–∏—Å–ª–µ–Ω–Ω–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–æ–π</h1>
<p>–ü—É—Å—Ç—å —É –Ω–∞—Å –∏–º–µ–µ—Ç—Å—è –Ω–µ–∫–æ—Ç–æ—Ä–∞—è —Ñ—É–Ω–∫—Ü–∏—è <code>f</code>, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–ª—É—á–∞–µ—Ç <code>double</code> –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç <code>double</code>. –¢–æ–≥–¥–∞ –º–æ–∂–Ω–æ —á–∏—Å–ª–µ–Ω–Ω–æ –≤—ã—á–∏—Å–ª–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—É—é —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:</p>
<pre data-lang="c++" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-c++ "><code class="language-c++" data-lang="c++"><span style="color:#668f14;">double </span><span style="color:#c23f31;">f</span><span>(</span><span style="color:#668f14;">double </span><span style="color:#5597d6;">x</span><span>);
</span><span>
</span><span style="color:#668f14;">double </span><span style="color:#c23f31;">derivative_f</span><span>(</span><span style="color:#668f14;">double </span><span style="color:#5597d6;">x</span><span>) {
</span><span>	</span><span style="color:#668f14;">double</span><span> h </span><span style="color:#72ab00;">= </span><span style="color:#b3933a;">0.0001</span><span>;
</span><span>	</span><span style="color:#72ab00;">return </span><span>(</span><span style="color:#5597d6;">f</span><span>(x</span><span style="color:#72ab00;">+</span><span>h)</span><span style="color:#72ab00;">-</span><span style="color:#5597d6;">f</span><span>(x))</span><span style="color:#72ab00;">/</span><span>h;
</span><span>}
</span></code></pre>
<p>–ù–æ –ø–∏—Å–∞—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –¥—Ä—É–≥—É—é —Ñ—É–Ω–∫—Ü–∏—é, –≤—ã—á–∏—Å–ª—è—é—â—É—é –µ—ë –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—É—é –Ω–µ–ø—Ä–∞–∫—Ç–∏—á–Ω–æ! –ü–æ—ç—Ç–æ–º—É —Ç–∞–∫—É—é –ø—Ä–æ–±–ª–µ–º—É –º–æ–∂–Ω–æ —Ä–µ—à–∏—Ç—å —Å –ø–æ–º–æ—â—å—é <code>std::function</code>:</p>
<pre data-lang="c++" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-c++ "><code class="language-c++" data-lang="c++"><span>std::function&lt;</span><span style="color:#668f14;">double</span><span>(</span><span style="color:#668f14;">double</span><span>)&gt; </span><span style="color:#c23f31;">derivative</span><span>(std::function&lt;</span><span style="color:#668f14;">double</span><span>(</span><span style="color:#668f14;">double</span><span>)&gt; </span><span style="color:#5597d6;">f</span><span>) {
</span><span>	</span><span style="color:#72ab00;">return </span><span>[f] (</span><span style="color:#668f14;">double</span><span> x) -&gt; </span><span style="color:#5597d6;">double </span><span>{
</span><span>		</span><span style="color:#668f14;">double</span><span> h </span><span style="color:#72ab00;">= </span><span style="color:#b3933a;">0.0001</span><span>;
</span><span>		</span><span style="color:#72ab00;">return </span><span>(</span><span style="color:#5597d6;">f</span><span>(x</span><span style="color:#72ab00;">+</span><span>h)</span><span style="color:#72ab00;">-</span><span style="color:#5597d6;">f</span><span>(x))</span><span style="color:#72ab00;">/</span><span>h;
</span><span>	}
</span><span>}
</span></code></pre>
<p>–î–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é, –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è —Å—á–∏—Ç–∞–µ—Ç –µ—ë –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—É—é. –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:</p>
<pre data-lang="c++" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-c++ "><code class="language-c++" data-lang="c++"><span style="color:#668f14;">double </span><span style="color:#c23f31;">f</span><span>(</span><span style="color:#668f14;">double </span><span style="color:#5597d6;">x</span><span>) {
</span><span>	</span><span style="color:#72ab00;">return</span><span> x</span><span style="color:#72ab00;">*</span><span>x;
</span><span>}
</span><span>
</span><span style="color:#668f14;">auto</span><span> df </span><span style="color:#72ab00;">= </span><span style="color:#5597d6;">derivative</span><span>(f);
</span><span>
</span><span style="color:#668f14;">double</span><span> a </span><span style="color:#72ab00;">= </span><span style="color:#5597d6;">f</span><span>(</span><span style="color:#b3933a;">1</span><span>); </span><span style="color:#7f8989;">// a == 1
</span><span style="color:#668f14;">double</span><span> a </span><span style="color:#72ab00;">= </span><span style="color:#5597d6;">df</span><span>(</span><span style="color:#b3933a;">1</span><span>); </span><span style="color:#7f8989;">// a == 2
</span></code></pre>
<p>–ê –¥–∞–ª–µ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –∫–æ–¥ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø–µ—Ä–≤–æ–π –∏ –≤—Ç–æ—Ä–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π, –≤–∑—è—Ç—ã–π –∏–∑ <a href="https://github.com/optozorax/labs_emf/blob/60b62fb5746aa83e3c52a802d5da1741950b6292/coursework/fem.cpp#L283">–∫—É—Ä—Å–æ–≤–æ–π –ø–æ –£–ú–§</a>, —Å–º–µ–ª–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –≤ —Å–≤–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.</p>
<pre data-lang="c++" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-c++ "><code class="language-c++" data-lang="c++"><span style="color:#668f14;">typedef</span><span> std::function&lt;</span><span style="color:#668f14;">double</span><span>(</span><span style="color:#668f14;">double</span><span>)&gt; </span><span style="color:#c23f31;">function_1d_t</span><span>; 
</span><span>
</span><span>function_1d_t </span><span style="color:#c23f31;">calc_first_derivative</span><span>(</span><span style="color:#668f14;">const</span><span> function_1d_t</span><span style="color:#72ab00;">&amp; </span><span style="color:#5597d6;">f</span><span>) {
</span><span>	</span><span style="color:#72ab00;">return </span><span>[f](</span><span style="color:#668f14;">double</span><span> x) -&gt; </span><span style="color:#5597d6;">double </span><span>{
</span><span>		</span><span style="color:#668f14;">const double</span><span> h </span><span style="color:#72ab00;">= </span><span style="color:#b3933a;">0.001</span><span>;
</span><span>		</span><span style="color:#72ab00;">return </span><span>(</span><span style="color:#72ab00;">-</span><span style="color:#5597d6;">f</span><span>(x </span><span style="color:#72ab00;">+ </span><span style="color:#b3933a;">2 </span><span style="color:#72ab00;">*</span><span> h) </span><span style="color:#72ab00;">+ </span><span style="color:#b3933a;">8 </span><span style="color:#72ab00;">* </span><span style="color:#5597d6;">f</span><span>(x </span><span style="color:#72ab00;">+</span><span> h) </span><span style="color:#72ab00;">- </span><span style="color:#b3933a;">8 </span><span style="color:#72ab00;">* </span><span style="color:#5597d6;">f</span><span>(x </span><span style="color:#72ab00;">-</span><span> h) </span><span style="color:#72ab00;">+ </span><span style="color:#5597d6;">f</span><span>(x </span><span style="color:#72ab00;">- </span><span style="color:#b3933a;">2 </span><span style="color:#72ab00;">*</span><span> h)) </span><span style="color:#72ab00;">/ </span><span>(</span><span style="color:#b3933a;">12 </span><span style="color:#72ab00;">*</span><span> h);
</span><span>	};
</span><span>}
</span><span>
</span><span>function_1d_t </span><span style="color:#c23f31;">calc_second_derivative</span><span>(</span><span style="color:#668f14;">const</span><span> function_1d_t</span><span style="color:#72ab00;">&amp; </span><span style="color:#5597d6;">f</span><span>) {
</span><span>	</span><span style="color:#72ab00;">return </span><span>[f](</span><span style="color:#668f14;">double</span><span> x) -&gt; </span><span style="color:#5597d6;">double </span><span>{
</span><span>		</span><span style="color:#668f14;">const double</span><span> h </span><span style="color:#72ab00;">= </span><span style="color:#b3933a;">0.001</span><span>;
</span><span>		</span><span style="color:#72ab00;">return </span><span>(</span><span style="color:#72ab00;">-</span><span style="color:#5597d6;">f</span><span>(x</span><span style="color:#72ab00;">+</span><span style="color:#b3933a;">2</span><span style="color:#72ab00;">*</span><span>h) </span><span style="color:#72ab00;">+ </span><span style="color:#b3933a;">16</span><span style="color:#72ab00;">*</span><span style="color:#5597d6;">f</span><span>(x</span><span style="color:#72ab00;">+</span><span>h) </span><span style="color:#72ab00;">- </span><span style="color:#b3933a;">30</span><span style="color:#72ab00;">*</span><span style="color:#5597d6;">f</span><span>(x) </span><span style="color:#72ab00;">+ </span><span style="color:#b3933a;">16</span><span style="color:#72ab00;">*</span><span style="color:#5597d6;">f</span><span>(x</span><span style="color:#72ab00;">-</span><span>h) </span><span style="color:#72ab00;">- </span><span style="color:#5597d6;">f</span><span>(x</span><span style="color:#72ab00;">-</span><span style="color:#b3933a;">2</span><span style="color:#72ab00;">*</span><span>h))</span><span style="color:#72ab00;">/</span><span>(</span><span style="color:#b3933a;">12</span><span style="color:#72ab00;">*</span><span>h</span><span style="color:#72ab00;">*</span><span>h);
</span><span>	};
</span><span>}
</span></code></pre>
<p>–ú–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è, —á—Ç–æ –µ—Å–ª–∏ —É–º–µ–Ω—å—à–∏—Ç—å –≤–µ–ª–∏—á–∏–Ω—É <code>0.001</code>, —Ç–æ —Ç–æ—á–Ω–æ—Å—Ç—å –ø–æ–≤—ã—Å–∏—Ç—Å—è, –Ω–æ —ç—Ç–æ –Ω–µ —Ç–∞–∫, –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ —É –º–µ–Ω—è —Ç–æ—á–Ω–æ—Å—Ç—å —Ç–æ–ª—å–∫–æ –ø–∞–¥–∞–ª–∞, –∞ –ø—Ä–∏ —ç—Ç–æ–º –∑–Ω–∞—á–µ–Ω–∏–∏ —É–∂–µ –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ —Ä–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è.</p>
<h1 id="primer-ispol-zovaniia-std-bind"><a class="anchor" href="#primer-ispol-zovaniia-std-bind">#</a>–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è <code>std::bind</code></h1>
<p>–û–∫–µ–π, —É –Ω–∞—Å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–æ–π –æ–¥–Ω–æ–º–µ—Ä–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏, –Ω–æ —á—Ç–æ –µ—Å–ª–∏ —É –Ω–∞—Å —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–≤–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä <code>f(x, y)</code>. –ö–∞–∫ –ø–æ—Å—á–∏—Ç–∞—Ç—å –µ—ë –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—É—é –ø–æ –æ–¥–Ω–æ–º—É –ø–∞—Ä–∞–º–µ—Ç—Ä—É? </p>
<p>–ù–∞ –ø–æ–º–æ—â—å –ø—Ä–∏—Ö–æ–¥–∏—Ç <code>std::bind</code> - —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–ª—É—á–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é, —Å–ø–∏—Å–æ–∫ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥—Ä—É–≥—É—é —Ñ—É–Ω–∫—Ü–∏—é. –ò –ª—É—á—à–µ —É–≤–∏–¥–µ—Ç—å –ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –∫–∞–∫ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç:</p>
<pre data-lang="c++" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-c++ "><code class="language-c++" data-lang="c++"><span style="color:#668f14;">double </span><span style="color:#c23f31;">f</span><span>(</span><span style="color:#668f14;">double </span><span style="color:#5597d6;">x</span><span>, </span><span style="color:#668f14;">double </span><span style="color:#5597d6;">y</span><span>) {
</span><span>	</span><span style="color:#72ab00;">return </span><span style="color:#b3933a;">2</span><span style="color:#72ab00;">*</span><span>x </span><span style="color:#72ab00;">+ </span><span style="color:#b3933a;">3</span><span style="color:#72ab00;">*</span><span>y;
</span><span>}
</span><span>
</span><span style="color:#7f8989;">// –ü—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è f –ø–æ x –ø—Ä–∏ y=0
</span><span style="color:#668f14;">auto</span><span> fx </span><span style="color:#72ab00;">= </span><span style="color:#5597d6;">calc_first_derivative</span><span>(std::</span><span style="color:#5597d6;">bind</span><span>(f, std::placeholders::_1, </span><span style="color:#b3933a;">0</span><span>));
</span><span>
</span><span style="color:#7f8989;">// –ü—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è f –ø–æ y –ø—Ä–∏ x=0
</span><span style="color:#668f14;">auto</span><span> fy </span><span style="color:#72ab00;">= </span><span style="color:#5597d6;">calc_first_derivative</span><span>(std::</span><span style="color:#5597d6;">bind</span><span>(f, </span><span style="color:#b3933a;">0</span><span>, std::placeholders::_1));
</span><span>
</span><span style="color:#668f14;">double</span><span> fx_value </span><span style="color:#72ab00;">= </span><span style="color:#5597d6;">fx</span><span>(</span><span style="color:#b3933a;">1</span><span>); </span><span style="color:#7f8989;">// fx_value = 2; 
</span><span style="color:#668f14;">double</span><span> fy_value </span><span style="color:#72ab00;">= </span><span style="color:#5597d6;">fy</span><span>(</span><span style="color:#b3933a;">1</span><span>); </span><span style="color:#7f8989;">// fy_value = 3;
</span></code></pre>
<p>–ì–¥–µ <code>std::placeholders::_1</code> –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä –≤–Ω–µ—à–Ω–µ–π —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—É—é –≤–æ–∑–≤—Ä–∞—Ç–∏—Ç <code>std::bind</code>.</p>
<p>–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ —Ñ—É–Ω–∫—Ü–∏—è <code>fx</code> –ø–æ–ª—É—á–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π –æ–¥–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π, –ø—Ä–∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–º <code>y=0</code>. –ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é <code>fx</code>, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—É—é –ø–æ <code>x</code>, –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–ª–µ–¥—É—é—â–∏–º —Ç—Ä—é–∫–æ–º:</p>
<pre data-lang="c++" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-c++ "><code class="language-c++" data-lang="c++"><span style="color:#668f14;">auto</span><span> fx </span><span style="color:#72ab00;">= </span><span>[] (</span><span style="color:#668f14;">double</span><span> x, </span><span style="color:#668f14;">double</span><span> y) -&gt; </span><span style="color:#5597d6;">double </span><span>{
</span><span>	</span><span style="color:#72ab00;">return </span><span style="color:#5597d6;">calc_first_derivative</span><span>(std::</span><span style="color:#5597d6;">bind</span><span>(f, std::placeholders::_1, y))(x);
</span><span>};
</span><span>
</span><span style="color:#668f14;">double</span><span> fx_value </span><span style="color:#72ab00;">= </span><span style="color:#5597d6;">fx</span><span>(</span><span style="color:#b3933a;">1</span><span>, </span><span style="color:#b3933a;">0</span><span>); </span><span style="color:#7f8989;">// df(1, 0)/dx
</span></code></pre>
<p>–ù–∞–≤–µ—Ä–Ω–æ–µ –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –µ–≥–æ —É–ª—É—á—à–∏—Ç—å, —á—Ç–æ–±—ã –Ω–µ –∫–æ–ø–∏–ø–∞—Å—Ç–∏—Ç—å —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏, –∏ –ø—Ä–∏–¥—É–º–∞—Ç—å –Ω–æ–≤—ã–π <code>std::bind2</code>, –ø—Ä–∏ –ø–æ–º–æ—â–∏ —à–∞–±–ª–æ–Ω–Ω–æ–π –º–∞–≥–∏–∏ C++, –Ω–æ —è —Ç–∞–∫–æ–µ –Ω–µ —É–º–µ—é. –ï—Å–ª–∏ –≤—ã —Å–º–æ–∂–µ—Ç–µ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ pull-request'–Ω–∏—Ç–µ —Å—é–¥–∞!</p>
<p>–ò–ª–∏ –¥—Ä—É–≥–æ–π –ø—Ä–∏–º–µ—Ä:</p>
<pre data-lang="c++" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-c++ "><code class="language-c++" data-lang="c++"><span style="color:#668f14;">double </span><span style="color:#c23f31;">f</span><span>(</span><span style="color:#668f14;">double </span><span style="color:#5597d6;">x</span><span>, </span><span style="color:#668f14;">double </span><span style="color:#5597d6;">y</span><span>, </span><span style="color:#668f14;">double </span><span style="color:#5597d6;">t</span><span>);
</span><span>
</span><span style="color:#72ab00;">using namespace</span><span> std::placeholders;
</span><span>
</span><span>std::function&lt;</span><span style="color:#668f14;">double</span><span>(</span><span style="color:#668f14;">double</span><span>, </span><span style="color:#668f14;">double</span><span>)&gt; g </span><span style="color:#72ab00;">= </span><span>std::</span><span style="color:#5597d6;">bind</span><span>(f, _2, </span><span style="color:#b3933a;">5</span><span>, _1);
</span><span>
</span><span style="color:#668f14;">double</span><span> gv </span><span style="color:#72ab00;">= </span><span style="color:#5597d6;">g</span><span>(</span><span style="color:#b3933a;">1</span><span>, </span><span style="color:#b3933a;">2</span><span>);
</span><span style="color:#668f14;">double</span><span> fv </span><span style="color:#72ab00;">= </span><span style="color:#5597d6;">f</span><span>(</span><span style="color:#b3933a;">2</span><span>, </span><span style="color:#b3933a;">5</span><span>, </span><span style="color:#b3933a;">1</span><span>);
</span><span>
</span><span style="color:#7f8989;">// gv == fv
</span></code></pre>
<h1 id="avtomaticheskii-raschet-pravoi-chasti"><a class="anchor" href="#avtomaticheskii-raschet-pravoi-chasti">#</a>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –ø—Ä–∞–≤–æ–π —á–∞—Å—Ç–∏</h1>
<p>–í —Ç–∞–∫–æ–º –ø—Ä–µ–¥–º–µ—Ç–µ, –∫–∞–∫ –£–ú–§ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ—à–∏—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ: </p>
<p><code>-div(lambda * grad u) + gamma * u + sigma * du/dt = f</code>, </p>
<p>–≥–¥–µ <code>u = u(x, y, t)</code> —è–≤–ª—è–µ—Ç—Å—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π. –î–ª—è —á–∏—Å–ª–µ–Ω–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ú–µ—Ç–æ–¥ –ö–æ–Ω–µ—á–Ω—ã—Ö –≠–ª–µ–º–µ–Ω—Ç–æ–≤.</p>
<p>–î–ª—è –¥–µ–∫–∞—Ä—Ç–æ–≤—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —ç—Ç–æ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞—Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –≤ <code>lambda*(d^2 u/dx^2 + d^2 u/dy^2)  + gamma * u + sigma * du/dt = f</code></p>
<p>–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã-—Ä–µ—à–∞—Ç–µ–ª—è –º—ã –ø—Ä–∏–¥—É–º—ã–≤–∞–µ–º –Ω–µ–∫–æ—Ç–æ—Ä—É—é —Ñ—É–Ω–∫—Ü–∏—é <code>u</code>, –Ω–∞–ø—Ä–∏–º–µ—Ä: <code>u = x*x + y*y + t</code>, –ø—Ä–∏–¥—É–º—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç <code>lambda</code>, <code>gamma</code>, <code>sigma</code>, –∏ —Å–æ–≥–ª–∞—Å–Ω–æ –≤–µ—Ä—Ö–Ω–µ–º—É —É—Ä–∞–≤–Ω–µ–Ω–∏—é –º–æ–∂–Ω–æ –≤—ã—á–∏—Å–ª–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é <code>f</code>, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–π –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ —Ç–æ–∂–¥–µ—Å—Ç–≤–æ.</p>
<p>–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—à—É –ø—Ä–æ–≥—Ä–∞–º–º—É –Ω–∞ —à–∏—Ä–æ–∫–æ–º —Å–ø–µ–∫—Ç—Ä–µ —Ñ—É–Ω–∫—Ü–∏–π, –º–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å —ç—Ç—É –ø—Ä–∞–≤—É—é —á–∞—Å—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—ã—à–µ–æ–ø–∏—Å–∞–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã—Ö:</p>
<pre data-lang="c++" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-c++ "><code class="language-c++" data-lang="c++"><span style="color:#668f14;">typedef</span><span> std::function&lt;</span><span style="color:#668f14;">double</span><span>(</span><span style="color:#668f14;">double</span><span>, </span><span style="color:#668f14;">double</span><span>, </span><span style="color:#668f14;">double</span><span>)&gt; </span><span style="color:#c23f31;">function_3d_t</span><span>;
</span><span>
</span><span style="color:#7f8989;">/** –í—Å–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Ä–µ—à–∞–µ–º–æ–≥–æ —É—Ä–∞–≤–Ω–µ–Ω–∏—è. */
</span><span style="color:#668f14;">struct </span><span style="color:#c23f31;">constants_t
</span><span>{
</span><span>	</span><span style="color:#668f14;">double</span><span> lambda; </span><span style="color:#7f8989;">/// –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤–Ω—É—Ç—Ä–∏ div
</span><span>	</span><span style="color:#668f14;">double</span><span> gamma;  </span><span style="color:#7f8989;">/// –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø—Ä–∏ u
</span><span>	</span><span style="color:#668f14;">double</span><span> sigma;  </span><span style="color:#7f8989;">/// –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø—Ä–∏ du/dt
</span><span>};
</span><span>
</span><span>function_3d_t </span><span style="color:#c23f31;">calc_right_part</span><span>(
</span><span>	</span><span style="color:#668f14;">const</span><span> function_3d_t</span><span style="color:#72ab00;">&amp; </span><span style="color:#5597d6;">u</span><span>,
</span><span>	</span><span style="color:#668f14;">const</span><span> constants_t</span><span style="color:#72ab00;">&amp;</span><span> cs
</span><span>) {
</span><span>	</span><span style="color:#7f8989;">// f = -div(lambda * grad u) + gamma * u + sigma * du/dt
</span><span>	</span><span style="color:#72ab00;">return </span><span>[</span><span style="color:#72ab00;">=</span><span>](</span><span style="color:#668f14;">double</span><span> x, </span><span style="color:#668f14;">double</span><span> y, </span><span style="color:#668f14;">double</span><span> t) -&gt; </span><span style="color:#5597d6;">double </span><span>{
</span><span>		</span><span style="color:#72ab00;">using namespace</span><span> placeholders;
</span><span>		</span><span style="color:#668f14;">auto</span><span> ut </span><span style="color:#72ab00;">= </span><span style="color:#5597d6;">calc_first_derivative</span><span>(</span><span style="color:#5597d6;">bind</span><span>(u, x, y, _1));
</span><span>
</span><span>		</span><span style="color:#668f14;">auto</span><span> uxx </span><span style="color:#72ab00;">= </span><span style="color:#5597d6;">calc_second_derivative</span><span>(</span><span style="color:#5597d6;">bind</span><span>(u, _1, y, t));
</span><span>		</span><span style="color:#668f14;">auto</span><span> uyy </span><span style="color:#72ab00;">= </span><span style="color:#5597d6;">calc_second_derivative</span><span>(</span><span style="color:#5597d6;">bind</span><span>(u, x, _1, t));
</span><span>
</span><span>		</span><span style="color:#72ab00;">return -</span><span>cs.</span><span style="color:#5597d6;">lambda </span><span style="color:#72ab00;">* </span><span>(</span><span style="color:#5597d6;">uxx</span><span>(x) </span><span style="color:#72ab00;">+ </span><span style="color:#5597d6;">uyy</span><span>(y)) </span><span style="color:#72ab00;">+</span><span> cs.</span><span style="color:#5597d6;">gamma </span><span style="color:#72ab00;">* </span><span style="color:#5597d6;">u</span><span>(x, y, t) </span><span style="color:#72ab00;">+</span><span> cs.</span><span style="color:#5597d6;">sigma </span><span style="color:#72ab00;">* </span><span style="color:#5597d6;">ut</span><span>(t);
</span><span>	};
</span><span>}
</span></code></pre>
<p>–ö–æ–¥ –≤–∑—è—Ç –æ–ø—è—Ç—å –∂–µ –∏–∑ <a href="https://github.com/optozorax/labs_emf/blob/60b62fb5746aa83e3c52a802d5da1741950b6292/coursework/fem.cpp#L304">—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –ø–æ –£–ú–§</a>.</p>
<p>–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –º—ã –ø–æ–ª—É—á–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é <code>f</code> –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–∑–≤–µ—Å—Ç–Ω–æ–π –Ω–∞–º —Ñ—É–Ω–∫—Ü–∏–∏ <code>u</code>.</p>
<p>–≠—Ç–æ –∏–∑–±–∞–≤–ª—è–µ—Ç –æ—Ç –ª–∏—à–Ω–µ–π —Ä—É—Ç–∏–Ω—ã —Ä—É—á–Ω–æ–≥–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã—Ö –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É—è —ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å, —Ç–∞–∫–∂–µ —Å–Ω–∏–∂–∞–µ—Ç—Å—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—à–∏–±–∏—Ç—å—Å—è.</p>
<h1 id="obertka-dlia-podscheta-vyzovov-funktsii"><a class="anchor" href="#obertka-dlia-podscheta-vyzovov-funktsii">#</a>–û–±–µ—Ä—Ç–∫–∞ –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏</h1>
<p>–ù–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞–º –Ω–∞–¥–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫–æ–π-—Ç–æ –º–µ—Ç–æ–¥, –Ω–∞—Ö–æ–¥—è—â–∏–π –º–∏–Ω–∏–º—É–º –∑–∞–¥–∞–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ <code>f</code>. –ù–∞–¥–æ —É–∑–Ω–∞—Ç—å –Ω–∞—Å–∫–æ–ª—å–∫–æ –æ–Ω —Ö–æ—Ä–æ—à–∏–π –ø—É—Ç–µ–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –µ–º—É –ø–æ—Ç—Ä–µ–±–æ–≤–∞–ª–æ—Å—å –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —Ñ—É–Ω–∫—Ü–∏–∏ <code>f</code>, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–±—ã—á–Ω–æ —Å–∞–º–æ–π –¥–æ—Ä–æ–≥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–µ–π —Å—á–∏—Ç–∞–µ—Ç—Å—è –∏–º–µ–Ω–Ω–æ –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ <code>f</code>. </p>
<p>–≠—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –Ω–µ –≤–º–µ—à–∏–≤–∞—è—Å—å –≤ –∫–æ–¥ —ç—Ç–æ–≥–æ –º–µ—Ç–æ–¥–∞, —è–≤–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –≤—ã—Å—Ç–∞–≤–ª—è—è <code>count++</code> –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏, –ø–æ—Å–ª–∞–≤ –≤–º–µ—Å—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–±—ë—Ä—Ç–∫—É –Ω–∞–¥ –Ω–µ–π:</p>
<pre data-lang="c++" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-c++ "><code class="language-c++" data-lang="c++"><span style="color:#668f14;">typedef</span><span> std::function&lt;</span><span style="color:#668f14;">double</span><span>(</span><span style="color:#668f14;">const</span><span> Vector</span><span style="color:#72ab00;">&amp;</span><span>)&gt; </span><span style="color:#c23f31;">Function</span><span>;
</span><span>
</span><span>Function </span><span style="color:#c23f31;">setFunctionToCountCalls</span><span>(</span><span style="color:#668f14;">int</span><span style="color:#72ab00;">* </span><span style="color:#5597d6;">where</span><span>, </span><span style="color:#668f14;">const</span><span> Function</span><span style="color:#72ab00;">&amp; </span><span style="color:#5597d6;">f</span><span>) {
</span><span>	(</span><span style="color:#72ab00;">*</span><span>where) </span><span style="color:#72ab00;">= </span><span style="color:#b3933a;">0</span><span>;
</span><span>	</span><span style="color:#72ab00;">return </span><span>[where, f](</span><span style="color:#668f14;">const</span><span> Vector</span><span style="color:#72ab00;">&amp;</span><span> v) -&gt; </span><span style="color:#5597d6;">double </span><span>{
</span><span>		(</span><span style="color:#72ab00;">*</span><span>where)</span><span style="color:#72ab00;">++</span><span>;
</span><span>		</span><span style="color:#72ab00;">return </span><span style="color:#5597d6;">f</span><span>(v);
</span><span>	};
</span><span>}
</span><span>
</span><span style="color:#668f14;">double </span><span style="color:#c23f31;">f</span><span>(</span><span style="color:#668f14;">const</span><span> Vector</span><span style="color:#72ab00;">&amp; </span><span style="color:#5597d6;">v</span><span>) {
</span><span>	</span><span style="color:#7f8989;">// ...
</span><span>}
</span><span>
</span><span style="color:#668f14;">int</span><span> fCount </span><span style="color:#72ab00;">= </span><span style="color:#b3933a;">0</span><span>;
</span><span style="color:#668f14;">auto</span><span> result </span><span style="color:#72ab00;">= </span><span style="color:#5597d6;">optimize</span><span>(</span><span style="color:#7f8989;">/* ... */</span><span>, </span><span style="color:#5597d6;">setFunctionToCountCalls</span><span>(</span><span style="color:#72ab00;">&amp;</span><span style="color:#5597d6;">fCount</span><span>, f), </span><span style="color:#7f8989;">/* ... */</span><span>);
</span></code></pre>
<p>–í–∑—è—Ç–æ –∏–∑ <a href="https://github.com/optozorax/optimization_methods/blob/feb65cda80b43145a58ada90b6de7c5ae8e777a4/2/methods.cpp#L268">2 –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π –ø–æ –ú–û</a>.</p>
<h1 id="zamer-vremeni"><a class="anchor" href="#zamer-vremeni">#</a>–ó–∞–º–µ—Ä –≤—Ä–µ–º–µ–Ω–∏</h1>
<p>–£ –Ω–∞—Å —Å—Ç–æ–∏—Ç –∑–∞–¥–∞—á–∞ –∑–∞–º–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –∫–∞–∫–æ–≥–æ-—Ç–æ –∫–æ–¥–∞. –ú–æ–∂–Ω–æ –ø–æ—Å—Ç—É–ø–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:</p>
<pre data-lang="c++" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-c++ "><code class="language-c++" data-lang="c++"><span style="color:#72ab00;">#include </span><span style="color:#d07711;">&lt;chrono&gt;
</span><span>
</span><span style="color:#72ab00;">using namespace</span><span> chrono;
</span><span style="color:#668f14;">auto</span><span> start </span><span style="color:#72ab00;">= </span><span>high_resolution_clock::</span><span style="color:#5597d6;">now</span><span>();
</span><span>
</span><span style="color:#7f8989;">// ...
</span><span style="color:#7f8989;">// main code
</span><span style="color:#7f8989;">// ...
</span><span>
</span><span style="color:#668f14;">auto</span><span> end </span><span style="color:#72ab00;">= </span><span>high_resolution_clock::</span><span style="color:#5597d6;">now</span><span>();
</span><span style="color:#668f14;">double</span><span> time </span><span style="color:#72ab00;">=</span><span> duration_cast&lt;microseconds&gt;(end </span><span style="color:#72ab00;">-</span><span> start).</span><span style="color:#5597d6;">count</span><span>();
</span></code></pre>
<p>–ù–æ —ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –ø–ª–æ—Ö–æ —Ç–µ–º, —á—Ç–æ –Ω–∞–º –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –Ω–∞–¥–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–∏ —É—á–∞—Å—Ç–∫–∏ –∫–æ–¥–∞, –∏ –º—ã –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –º–æ–∂–µ–º –ø–æ—Ç–µ—Ä—è—Ç—å –Ω–∞—á–∞–ª–æ –∏–ª–∏ –∫–æ–Ω–µ—Ü –∑–∞–º–µ—Ä–∞ –≤—Ä–µ–º–µ–Ω–∏, –ø–æ—ç—Ç–æ–º—É –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–æ–Ω—Ü–µ–ø—Ü–∏–µ–π RAII, –∏ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ —Å–ª–µ–¥—É—é—â–∏–º –∫—Ä–∞—Å–∏–≤—ã–º –æ–±—Ä–∞–∑–æ–º, –ø–µ—Ä–µ–¥–∞–≤ –≤ —Ñ—É–Ω–∫—Ü–∏—é –∑–∞–º–µ—Ä–∞ –≤—Ä–µ–º–µ–Ω–∏ –ª—è–º–±–¥—É –∫–æ–¥–∞, –≤—Ä–µ–º—è –∫–æ—Ç–æ—Ä–æ–≥–æ –±—É–¥–µ—Ç –∑–∞–º–µ—Ä—è—Ç—å—Å—è:</p>
<pre data-lang="c++" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-c++ "><code class="language-c++" data-lang="c++"><span style="color:#72ab00;">#include </span><span style="color:#d07711;">&lt;chrono&gt;
</span><span style="color:#72ab00;">#include </span><span style="color:#d07711;">&lt;functional&gt;
</span><span>
</span><span style="color:#7f8989;">/** –°—á–∏—Ç–∞–µ—Ç –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ f –≤ –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥–∞—Ö. */
</span><span style="color:#668f14;">inline double </span><span style="color:#c23f31;">calc_time_microseconds</span><span>(</span><span style="color:#668f14;">const</span><span> std::function&lt;</span><span style="color:#668f14;">void</span><span>(</span><span style="color:#668f14;">void</span><span>)&gt;</span><span style="color:#72ab00;">&amp; </span><span style="color:#5597d6;">f</span><span>) {
</span><span>	</span><span style="color:#72ab00;">using namespace</span><span> std::chrono;
</span><span>	</span><span style="color:#668f14;">auto</span><span> start </span><span style="color:#72ab00;">= </span><span>high_resolution_clock::</span><span style="color:#5597d6;">now</span><span>();
</span><span>	</span><span style="color:#5597d6;">f</span><span>();
</span><span>	</span><span style="color:#668f14;">auto</span><span> end </span><span style="color:#72ab00;">= </span><span>high_resolution_clock::</span><span style="color:#5597d6;">now</span><span>();
</span><span>	</span><span style="color:#72ab00;">return </span><span style="color:#5597d6;">duration_cast</span><span>&lt;microseconds&gt;(end </span><span style="color:#72ab00;">-</span><span> start).</span><span style="color:#5597d6;">count</span><span>();;
</span><span>}
</span><span>
</span><span style="color:#668f14;">double</span><span> time </span><span style="color:#72ab00;">= </span><span style="color:#5597d6;">calc_time_microseconds</span><span>([</span><span style="color:#72ab00;">&amp;</span><span>](){
</span><span>	</span><span style="color:#7f8989;">// ...
</span><span>	</span><span style="color:#7f8989;">// main code
</span><span>	</span><span style="color:#7f8989;">// ...
</span><span>});
</span></code></pre>
<p>–ü—Ä–∏—Ç–æ–º –º—ã –Ω–µ —Ç–µ—Ä—è–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –±–ª–∞–≥–æ–¥–∞—Ä—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ª—è–º–±–¥.</p>
<p>–ö–æ–¥ –≤–∑—è—Ç –∏–∑ <a href="https://github.com/optozorax/labs_emf/blob/60b62fb5746aa83e3c52a802d5da1741950b6292/coursework/lib.h#L24">–∫—É—Ä—Å–æ–≤–æ–π –ø–æ –£–ú–§</a>.</p>
<h1 id="dvoinoi-integral"><a class="anchor" href="#dvoinoi-integral">#</a>–î–≤–æ–π–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞–ª</h1>
<p>–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞–ª–∞ –æ–¥–Ω–æ–º–µ—Ä–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏:</p>
<pre data-lang="c++" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-c++ "><code class="language-c++" data-lang="c++"><span style="color:#72ab00;">#include </span><span style="color:#d07711;">&lt;functional&gt;
</span><span>
</span><span style="color:#668f14;">typedef</span><span> std::function&lt;</span><span style="color:#668f14;">double</span><span>(</span><span style="color:#668f14;">double</span><span>)&gt; </span><span style="color:#c23f31;">function_1d_t</span><span>; 
</span><span>
</span><span style="color:#668f14;">double </span><span style="color:#c23f31;">calc_integral_gauss3</span><span>(
</span><span>	</span><span style="color:#668f14;">double </span><span style="color:#5597d6;">a</span><span>, </span><span style="color:#668f14;">double </span><span style="color:#5597d6;">b</span><span>, </span><span style="color:#668f14;">int </span><span style="color:#5597d6;">n</span><span>, </span><span style="color:#7f8989;">// n - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—ã—Ö —É–∑–ª–æ–≤
</span><span>	</span><span style="color:#668f14;">const</span><span> function_1d_t</span><span style="color:#72ab00;">&amp;</span><span> f
</span><span>);
</span></code></pre>
<p>–¢–æ–≥–¥–∞ –¥–≤–æ–π–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞–ª –¥–≤—É–º–µ—Ä–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–∂–Ω–æ –≤—ã—á–∏—Å–ª–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:</p>
<pre data-lang="c++" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-c++ "><code class="language-c++" data-lang="c++"><span style="color:#668f14;">double </span><span style="color:#c23f31;">calc_integral_gauss3</span><span>(
</span><span>	</span><span style="color:#668f14;">double </span><span style="color:#5597d6;">ax</span><span>, </span><span style="color:#668f14;">double </span><span style="color:#5597d6;">bx</span><span>, </span><span style="color:#668f14;">int </span><span style="color:#5597d6;">nx</span><span>,
</span><span>	</span><span style="color:#668f14;">double </span><span style="color:#5597d6;">ay</span><span>, </span><span style="color:#668f14;">double </span><span style="color:#5597d6;">by</span><span>, </span><span style="color:#668f14;">int </span><span style="color:#5597d6;">ny</span><span>,
</span><span>	</span><span style="color:#668f14;">const</span><span> function_2d_t</span><span style="color:#72ab00;">&amp;</span><span> f
</span><span>) {
</span><span>	</span><span style="color:#72ab00;">return </span><span style="color:#5597d6;">calc_integral_gauss3</span><span>(ax, bx, nx, [ay, by, ny, f](</span><span style="color:#668f14;">double</span><span> x)-&gt;</span><span style="color:#5597d6;">double </span><span>{
</span><span>		</span><span style="color:#72ab00;">return </span><span style="color:#5597d6;">calc_integral_gauss3</span><span>(ay, by, ny, </span><span style="color:#5597d6;">bind</span><span>(f, x, _1));
</span><span>	});
</span><span>}
</span></code></pre>
<p>–ö–æ–¥ –≤–∑—è—Ç –∏–∑ <a href="https://github.com/optozorax/labs_emf/blob/60b62fb5746aa83e3c52a802d5da1741950b6292/coursework/fem.cpp#L269">–∫—É—Ä—Å–æ–≤–æ–π –ø–æ –£–ú–§</a>.</p>
<h1 id="funktsii-testirovaniia"><a class="anchor" href="#funktsii-testirovaniia">#</a>–§—É–Ω–∫—Ü–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h1>
<p>–ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º, —É –Ω–∞—Å –µ—Å—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ –º–µ—Ç–æ–¥–æ–≤, —Ä–µ—à–∞—é—â–∏—Ö –æ–¥–Ω—É –∑–∞–¥–∞—á—É, –Ω–æ –∫–∞–∂–¥—ã–π –ø–æ-—Ä–∞–∑–Ω–æ–º—É, –ø—Ä–∏ —ç—Ç–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É –Ω–∏—Ö –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π. –ò —Å—Ç–æ–∏—Ç –∑–∞–¥–∞—á–∞ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –≤—Å–µ –µ–¥–∏–Ω—ã–º –æ–±—Ä–∞–∑–æ–º, –ø–æ—Å—Ç—Ä–æ–∏—Ç—å —Ç–∞–±–ª–∏—Ü—ã. –≠—Ç–æ —Ç–æ–∂–µ –º–æ–∂–Ω–æ –∫—Ä–∞—Å–∏–≤–æ —Å–¥–µ–ª–∞—Ç—å —Å –ø–æ–º–æ—â—å—é <code>std::function</code>, –Ω–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ—Ç–æ—Ç–∏–ø —Ñ—É–Ω–∫—Ü–∏–∏ –º–µ—Ç–æ–¥–∞:</p>
<pre data-lang="c++" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-c++ "><code class="language-c++" data-lang="c++"><span style="color:#668f14;">typedef</span><span> std::function&lt;MethodResult(</span><span style="color:#7f8989;">/* Method args. */</span><span>)&gt; </span><span style="color:#c23f31;">Method</span><span>;
</span><span>
</span><span>MethodResult </span><span style="color:#c23f31;">method1</span><span>(</span><span style="color:#7f8989;">/* Method args. */</span><span>);
</span><span>MethodResult </span><span style="color:#c23f31;">method2</span><span>(</span><span style="color:#7f8989;">/* Method args. */</span><span>);
</span><span>MethodResult </span><span style="color:#c23f31;">method3</span><span>(</span><span style="color:#7f8989;">/* Method args. */</span><span>);
</span><span>MethodResult </span><span style="color:#c23f31;">method4</span><span>(</span><span style="color:#7f8989;">/* Method args. */</span><span>);
</span><span>MethodResult </span><span style="color:#c23f31;">method5</span><span>(</span><span style="color:#7f8989;">/* Method args. */</span><span>);
</span><span>
</span><span style="color:#668f14;">void </span><span style="color:#c23f31;">makeTableForMethod</span><span>(
</span><span>	</span><span style="color:#668f14;">const</span><span> Method</span><span style="color:#72ab00;">&amp; </span><span style="color:#5597d6;">method</span><span>,
</span><span>	</span><span style="color:#668f14;">const</span><span> std::string</span><span style="color:#72ab00;">&amp; </span><span style="color:#5597d6;">file</span><span>,
</span><span>	</span><span style="color:#7f8989;">/* Method args. */	
</span><span>) {
</span><span>	</span><span style="color:#7f8989;">// ...
</span><span>}
</span><span>
</span><span>std::vector&lt;pair&lt;Method, string&gt;&gt; methodsToTest </span><span style="color:#72ab00;">= </span><span>{
</span><span>	{method1, </span><span style="color:#d07711;">&quot;table1.txt&quot;</span><span>},	
</span><span>	{method2, </span><span style="color:#d07711;">&quot;table2.txt&quot;</span><span>},
</span><span>	{method3, </span><span style="color:#d07711;">&quot;table3.txt&quot;</span><span>},
</span><span>	{method4, </span><span style="color:#d07711;">&quot;table4.txt&quot;</span><span>},
</span><span>	{method5, </span><span style="color:#d07711;">&quot;table5.txt&quot;</span><span>},
</span><span>};
</span><span>
</span><span style="color:#72ab00;">for </span><span>(</span><span style="color:#668f14;">auto</span><span style="color:#72ab00;">&amp;</span><span> i </span><span style="color:#72ab00;">:</span><span> methodsToTest)
</span><span>	</span><span style="color:#5597d6;">makeTableForMethod</span><span>(i.</span><span style="color:#5597d6;">first</span><span>, i.</span><span style="color:#5597d6;">second</span><span>, </span><span style="color:#7f8989;">/* Method args. */</span><span>);
</span></code></pre>
<p>–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ª—é–¥–∏ –¥–µ–ª–∞—é—Ç —ç—Ç–æ —Å –ø–æ–º–æ—â—å—é –∫–æ–ø–∏–ø–∞—Å—Ç–∞, –Ω–æ –¥—É–º–∞—é –Ω–µ —Å—Ç–æ–∏—Ç –≤–∞–º –æ–±—ä—è—Å–Ω—è—Ç—å —á–µ–º –ø–ª–æ—Ö –∫–æ–ø–∏–ø–∞—Å—Ç –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å —ç—Ç–∏–º –ø–æ–¥—Ö–æ–¥–æ–º.</p>
<p>–ö–æ–¥ –≤–∑—è—Ç –∏–∑ <a href="https://github.com/optozorax/optimization_methods/blob/feb65cda80b43145a58ada90b6de7c5ae8e777a4/2/make_tables.cpp#L9">2 –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π –ø–æ –ú–û</a>.</p>
<h1 id="odnomernyi-poisk"><a class="anchor" href="#odnomernyi-poisk">#</a>–û–¥–Ω–æ–º–µ—Ä–Ω—ã–π –ø–æ–∏—Å–∫</h1>
<p>–í –ú–û –º–Ω–æ–≥–æ–º–µ—Ä–Ω—ã–µ –º–µ—Ç–æ–¥—ã –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è –º–∏–Ω–∏–º—É–º–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–Ω–æ–º–µ—Ä–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏. –ò –±—ã–ª–æ –∑–∞–¥–∞–Ω–∏–µ –∑–∞–¥–∞–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã –æ–¥–Ω–æ–º–µ—Ä–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, —á—Ç–æ–±—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Ö —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –≤ —ç—Ç–æ–π —Å—Ä–µ–¥–µ. –ù—É —Ä–∞–∑ —Ç–∞–∫, —Ç–æ –º—ã –Ω–µ –±—É–¥–µ–º –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ –∂–µ—Å—Ç–∫–æ –∑–∞–¥–∞–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –æ–¥–Ω–æ–º–µ—Ä–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, –∞ –±—É–¥–µ–º –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –µ—ë –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –º–Ω–æ–≥–æ–º–µ—Ä–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:</p>
<pre data-lang="c++" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-c++ "><code class="language-c++" data-lang="c++"><span style="color:#668f14;">typedef</span><span> std::function&lt;</span><span style="color:#668f14;">double</span><span>(</span><span style="color:#668f14;">const double</span><span style="color:#72ab00;">&amp;</span><span>)&gt; </span><span style="color:#c23f31;">OneDimensionFunction</span><span>;
</span><span style="color:#668f14;">typedef</span><span> std::function&lt;</span><span style="color:#668f14;">double</span><span>(</span><span style="color:#668f14;">const</span><span> OneDimensionFunction</span><span style="color:#72ab00;">&amp;</span><span>, </span><span style="color:#668f14;">double</span><span>, </span><span style="color:#668f14;">double</span><span>, </span><span style="color:#668f14;">double</span><span>)&gt; </span><span style="color:#c23f31;">OneDimenshionExtremumFinder</span><span>;
</span><span>
</span><span style="color:#668f14;">double </span><span style="color:#c23f31;">oneDimensionOptimizator1</span><span>(</span><span style="color:#668f14;">const</span><span> OneDimensionFunction</span><span style="color:#72ab00;">&amp; </span><span style="color:#5597d6;">f</span><span>, </span><span style="color:#668f14;">double </span><span style="color:#5597d6;">a</span><span>, </span><span style="color:#668f14;">double </span><span style="color:#5597d6;">b</span><span>, </span><span style="color:#668f14;">double </span><span style="color:#5597d6;">eps</span><span>);
</span><span style="color:#668f14;">double </span><span style="color:#c23f31;">oneDimensionOptimizator2</span><span>(</span><span style="color:#668f14;">const</span><span> OneDimensionFunction</span><span style="color:#72ab00;">&amp; </span><span style="color:#5597d6;">f</span><span>, </span><span style="color:#668f14;">double </span><span style="color:#5597d6;">a</span><span>, </span><span style="color:#668f14;">double </span><span style="color:#5597d6;">b</span><span>, </span><span style="color:#668f14;">double </span><span style="color:#5597d6;">eps</span><span>);
</span><span style="color:#668f14;">double </span><span style="color:#c23f31;">oneDimensionOptimizator3</span><span>(</span><span style="color:#668f14;">const</span><span> OneDimensionFunction</span><span style="color:#72ab00;">&amp; </span><span style="color:#5597d6;">f</span><span>, </span><span style="color:#668f14;">double </span><span style="color:#5597d6;">a</span><span>, </span><span style="color:#668f14;">double </span><span style="color:#5597d6;">b</span><span>, </span><span style="color:#668f14;">double </span><span style="color:#5597d6;">eps</span><span>);
</span><span style="color:#668f14;">double </span><span style="color:#c23f31;">oneDimensionOptimizator4</span><span>(</span><span style="color:#668f14;">const</span><span> OneDimensionFunction</span><span style="color:#72ab00;">&amp; </span><span style="color:#5597d6;">f</span><span>, </span><span style="color:#668f14;">double </span><span style="color:#5597d6;">a</span><span>, </span><span style="color:#668f14;">double </span><span style="color:#5597d6;">b</span><span>, </span><span style="color:#668f14;">double </span><span style="color:#5597d6;">eps</span><span>);
</span><span>
</span><span>
</span><span style="color:#668f14;">typedef</span><span> std::function&lt;</span><span style="color:#668f14;">double</span><span>(</span><span style="color:#668f14;">const</span><span> Vector</span><span style="color:#72ab00;">&amp;</span><span>)&gt; </span><span style="color:#c23f31;">Function</span><span>;
</span><span>
</span><span>MethodResult </span><span style="color:#c23f31;">multiDimenshionOptimize1</span><span>(
</span><span>	</span><span style="color:#668f14;">const</span><span> Function</span><span style="color:#72ab00;">&amp; </span><span style="color:#5597d6;">f</span><span>, 
</span><span>	</span><span style="color:#668f14;">const</span><span> OneDimenshionExtremumFinder</span><span style="color:#72ab00;">&amp; </span><span style="color:#5597d6;">argmin</span><span>, 
</span><span>	</span><span style="color:#668f14;">const</span><span> Vector</span><span style="color:#72ab00;">&amp; </span><span style="color:#5597d6;">x0</span><span>, 
</span><span>	</span><span style="color:#668f14;">const double</span><span style="color:#72ab00;">&amp;</span><span> eps
</span><span>);
</span><span>
</span><span>MethodResult </span><span style="color:#c23f31;">multiDimenshionOptimize2</span><span>(
</span><span>	</span><span style="color:#668f14;">const</span><span> Function</span><span style="color:#72ab00;">&amp; </span><span style="color:#5597d6;">f</span><span>, 
</span><span>	</span><span style="color:#668f14;">const</span><span> OneDimenshionExtremumFinder</span><span style="color:#72ab00;">&amp; </span><span style="color:#5597d6;">argmin</span><span>, 
</span><span>	</span><span style="color:#668f14;">const</span><span> Vector</span><span style="color:#72ab00;">&amp; </span><span style="color:#5597d6;">x0</span><span>, 
</span><span>	</span><span style="color:#668f14;">const double</span><span style="color:#72ab00;">&amp;</span><span> eps
</span><span>);
</span></code></pre>
<p>–ö–æ–¥ –≤–∑—è—Ç –∏–∑ <a href="https://github.com/optozorax/optimization_methods/blob/feb65cda80b43145a58ada90b6de7c5ae8e777a4/2/methods.h#L18">2 –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π –ø–æ –ú–û</a>.</p>
<h1 id="pattern-listener"><a class="anchor" href="#pattern-listener">#</a>–ü–∞—Ç—Ç–µ—Ä–Ω listener</h1>
<p>–ò–Ω–æ–≥–¥–∞ –±—ã–≤–∞–µ—Ç —Ç–∞–∫, —á—Ç–æ –≤–∞–º –Ω—É–∂–Ω–æ –≤—ã–≤–æ–¥–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –º–µ—Ç–æ–¥–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—ã —Ä–µ—à–∞–µ—Ç–µ –∑–∞–¥–∞—á—É –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, –∏ –≤–∞–º –Ω–∞–¥–æ –Ω–∞ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ –≤—ã–≤–æ–¥–∏—Ç—å —Ç–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ, –∑–Ω–∞—á–µ–Ω–∏–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ —ç—Ç–æ–π —Ç–æ—á–∫–µ –∏—Ç–¥, —á—Ç–æ–±—ã —Å—Ç—Ä–æ–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –¥–µ–ª–∞—Ç—å —ç—Ç–æ —è–≤–Ω–æ, –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤ —Ñ—É–Ω–∫—Ü–∏—é –º–µ—Ç–æ–¥–∞ —Ñ—É–Ω–∫—Ü–∏—é <code>listener</code>, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –≤—Å—ë –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–µ—Ç–æ–¥–∞, –∏ —É–∂–µ —É —Å–µ–±—è –≤–Ω—É—Ç—Ä–∏ —Ä–µ—à–∞—Ç—å —á—Ç–æ —Å —ç—Ç–∏–º –¥–µ–ª–∞—Ç—å.</p>
<p>–í –æ–¥–Ω–æ–º —Å–ª—É—á–∞–µ –æ–Ω–∞ –º–æ–∂–µ—Ç –≤—ã–≤–æ–¥–∏—Ç—å —ç—Ç–æ –Ω–∞ —ç–∫—Ä–∞–Ω, –≤ –¥—Ä—É–≥–æ–º —Å–ª—É—á–∞–µ - –≤ —Ñ–∞–π–ª, –∞ –≤ —Ç—Ä–µ—Ç—å–µ–º, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–∞—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å - –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å —Å —ç—Ç–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π.</p>
<p>–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —è –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —ç—Ç–æ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ, –∞ –ø—Ä–∏–º–µ—Ä —ç—Ç–æ–≥–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –≤–∑—è–ª –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ <a href="https://github.com/optozorax/differential-evolution/blob/9cfefc0b36ed3bf4ca6c37d786244d56c0b3b2ba/de_test/tutorial.cpp#L71">–¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π —ç–≤–æ–ª—é—Ü–∏–∏</a>.</p>
<p>–¢–∞–º –∂–µ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å <strong>–ø–∞—Ç—Ç–µ—Ä–Ω termination strategy</strong>, –ø—Ä–∏ –ø–æ–º–æ—â–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤ –º–µ—Ç–æ–¥ —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç —Ä–µ—à–∞—Ç—å –∫–æ–≥–¥–∞ –∑–∞–≤–µ—Ä—à–∞—Ç—å –º–µ—Ç–æ–¥. –ù–æ –≤ —Ä–∞–º–∫–∞—Ö –Ω–∞—à–µ–π —É—á–µ–±–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã —ç—Ç–æ –∏–∑–ª–∏—à–Ω–∞—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è, –∏ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º–µ—Ç–æ–¥–∞ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—Ç—Å—è.</p>
<h1 id="inkapsuliruem-s-pomoshch-iu-std-function"><a class="anchor" href="#inkapsuliruem-s-pomoshch-iu-std-function">#</a>–ò–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ–º —Å –ø–æ–º–æ—â—å—é <code>std::function</code></h1>
<p>–í –£–ú–§ —É –Ω–∞—Å –µ—Å—Ç—å –∑–∞–¥–∞—á–∞ –ø–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–µ—á–Ω–æ-—ç–ª–µ–º–µ–Ω—Ç–Ω—É—é –∞–ø–ø—Ä–æ–∫—Å–∏–º–∞—Ü–∏—é —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∞–≤–æ–π —á–∞—Å—Ç–∏ –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ —É—Ä–∞–≤–Ω–µ–Ω–∏—è –∏ —Å–µ—Ç–∫–∏ –∫–æ–Ω–µ—á–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤. –£—á–∏—Ç—ã–≤–∞—è —ç—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, —Ä–µ—à–∞—Ç–µ–ª—å –ú–ö–≠ –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:</p>
<pre data-lang="c++" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-c++ "><code class="language-c++" data-lang="c++"><span>vector_t </span><span style="color:#c23f31;">solve_differential_equation</span><span>(
</span><span>	</span><span style="color:#668f14;">const</span><span> function_3d_t</span><span style="color:#72ab00;">&amp; </span><span style="color:#5597d6;">f</span><span>,
</span><span>	</span><span style="color:#668f14;">const</span><span> grid_t</span><span style="color:#72ab00;">&amp;</span><span> grid
</span><span>);
</span></code></pre>
<p>–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤–µ–∫—Ç–æ—Ä, –ø–æ—Ç–æ–º—É —á—Ç–æ –º—ã –Ω–∞—Ö–æ–¥–∏–º —Ç–æ–ª—å–∫–æ –∞–ø–ø—Ä–æ–∫—Å–∏–º–∞—Ü–∏—é –≤–µ—Å–æ–≤ <code>q</code>, –∏–º–µ–Ω–Ω–æ –æ–Ω–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ –º–µ—Ç–æ–¥–µ.</p>
<p>–ù–æ –ø—Ä–∏ —Ä–µ—à–µ–Ω–∏–∏ –ú–ö–≠ –º—ã –Ω–µ –º–æ–∂–µ–º –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç—É –≤–µ—â—å, —á—Ç–æ –Ω–∞–º –Ω—É–∂–Ω–æ –≤—ã—Å—Ç–∞–≤–ª—è—Ç—å –∫—Ä–∞–µ–≤—ã–µ —É—Å–ª–æ–≤–∏—è. –ö—Ä–∞–µ–≤—ã–µ —É—Å–ª–æ–≤–∏—è - —ç—Ç–æ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –Ω–∞–º –∑–Ω–∞—á–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ –∫—Ä–∞—è—Ö –æ–±–ª–∞—Å—Ç–∏. –ù–µ –∏–º–µ—è –∫—Ä–∞–µ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π, –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ä–µ—à–∏—Ç—å –∑–∞–¥–∞—á—É, –æ–Ω–∞ –ø—Ä–æ—Å—Ç–æ –Ω–µ —Å–æ–π–¥–µ—Ç—Å—è.</p>
<p>–ü–æ—ç—Ç–æ–º—É –º—ã –¥–æ–ª–∂–Ω—ã –∫–∞–∫–∏–º-—Ç–æ –æ–±—Ä–∞–∑–æ–º –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ—à–µ–Ω–∏—è –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ —É—Ä–∞–≤–Ω–µ–Ω–∏—è –≤—ã—Å—Ç–∞–≤–ª—è—Ç—å –∫—Ä–∞–µ–≤—ã–µ —É—Å–ª–æ–≤–∏—è.</p>
<p>–í –Ω–∞—à–µ–º –∫—É—Ä—Å–µ –£–ú–§ –º—ã –Ω–µ —Ä–µ—à–∞–µ–º —Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏, –∞ –ª–∏—à—å –∏—Å—Å–ª–µ–¥—É–µ–º –Ω–∞—Å–∫–æ–ª—å–∫–æ —Ö–æ—Ä–æ—à–æ –º–µ—Ç–æ–¥ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ –Ω–∞–º —Ñ—É–Ω–∫—Ü–∏—è–º–∏ <code>u</code>, –ø–æ—ç—Ç–æ–º—É –º–æ–∂–µ—Ç –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–±–ª–∞–∑–Ω –Ω–∞–ø–∏—Å–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:</p>
<pre data-lang="c++" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-c++ "><code class="language-c++" data-lang="c++"><span>vector_t </span><span style="color:#c23f31;">solve_differential_equation</span><span>(
</span><span>	</span><span style="color:#668f14;">const</span><span> function_3d_t</span><span style="color:#72ab00;">&amp; </span><span style="color:#5597d6;">f</span><span>,
</span><span>	</span><span style="color:#668f14;">const</span><span> grid_t</span><span style="color:#72ab00;">&amp; </span><span style="color:#5597d6;">grid</span><span>,
</span><span>	</span><span style="color:#668f14;">const</span><span> function_3d_t</span><span style="color:#72ab00;">&amp;</span><span> true_function_u
</span><span>) {
</span><span>	</span><span style="color:#7f8989;">// doing smth
</span><span>	</span><span style="color:#7f8989;">// –≤—ã—Å—Ç–∞–≤–ª—è–µ–º –∫—Ä–∞–µ–≤—ã–µ —É—Å–ª–æ–≤–∏—è —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ u –ø–æ –∫—Ä–∞—è–º –æ–±–ª–∞—Å—Ç–∏
</span><span>	</span><span style="color:#7f8989;">// –¥–µ–ª–∞–µ–º —á—Ç–æ-—Ç–æ –¥–∞–ª—å—à–µ
</span><span>}
</span></code></pre>
<p>–ù–æ —ç—Ç–æ —É–∂–∞—Å–Ω—ã–π —Å—Ç–∏–ª—å! –ó–∞—á–µ–º –Ω–∞–º –Ω–∞—Ö–æ–¥–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏ –ø–æ–º–æ—â–∏ —á–∏—Å–ª–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤, –∫–æ—Ç–æ—Ä—É—é –º—ã —É–∂–µ –∑–Ω–∞–µ–º? –≠—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –±—Ä–µ–¥, –ø–æ—ç—Ç–æ–º—É –±–æ–ª–µ–µ –∫—Ä–∞—Å–∏–≤—ã–º –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å <strong>—Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç –∫—Ä–∞–µ–≤—ã–µ —É—Å–ª–æ–≤–∏—è</strong>:</p>
<pre data-lang="c++" style="background-color:#f5f5f5;color:#1f1f1f;" class="language-c++ "><code class="language-c++" data-lang="c++"><span>vector_t </span><span style="color:#c23f31;">solve_differential_equation</span><span>(
</span><span>	</span><span style="color:#668f14;">const</span><span> function_3d_t</span><span style="color:#72ab00;">&amp; </span><span style="color:#5597d6;">f</span><span>,
</span><span>	</span><span style="color:#668f14;">const</span><span> grid_t</span><span style="color:#72ab00;">&amp; </span><span style="color:#5597d6;">grid</span><span>, 
</span><span>	</span><span style="color:#668f14;">const</span><span> boundary_setter_function_t</span><span style="color:#72ab00;">&amp;</span><span> set_boundary_conditions
</span><span>) {
</span><span>	</span><span style="color:#7f8989;">// doing smth
</span><span>	</span><span style="color:#5597d6;">set_boundary_conditions</span><span>(</span><span style="color:#7f8989;">/* ... */</span><span>);
</span><span>	</span><span style="color:#7f8989;">// –¥–µ–ª–∞–µ–º —á—Ç–æ-—Ç–æ –¥–∞–ª—å—à–µ
</span><span>}
</span></code></pre>
<p>–≠—Ç–æ –æ—á–µ–Ω—å –∫—Ä–∞—Å–∏–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–æ –ø—Ä–∏ —Ä–µ—à–µ–Ω–∏–∏ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á, –µ—Å–ª–∏ –º—ã —Ä–µ–∞–ª—å–Ω–æ –Ω–µ –∑–Ω–∞–µ–º –∏—Å—Ç–∏–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é, –Ω–æ –∑–Ω–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –∫—Ä–∞–µ–≤—ã—Ö —É—Å–ª–æ–≤–∏–π. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø–æ–≤—ã—à–∞–µ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ—Å—Ç—å –∫–æ–¥–∞, –ø–æ–∑–≤–æ–ª—è–µ—Ç –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.</p>
<p>–¢–∞–∫ –∫–∞–∫ –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ, –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ —Å–º–æ—Ç—Ä–∏—Ç–µ –∫–æ–¥ –∏–∑ –∫—É—Ä—Å–æ–≤–æ–π –ø–æ –£–ú–§:</p>
<ul>
<li><a href="https://github.com/optozorax/labs_emf/blob/60b62fb5746aa83e3c52a802d5da1741950b6292/coursework/fem.h#L146">–ü—Ä–æ—Ç–æ—Ç–∏–ø —Ñ—É–Ω–∫—Ü–∏–∏ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∫—Ä–∞–µ–≤—ã—Ö —É—Å–ª–æ–≤–∏–π.</a></li>
<li><a href="https://github.com/optozorax/labs_emf/blob/60b62fb5746aa83e3c52a802d5da1741950b6292/coursework/fem.h#L149">–°–∞–º–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∫—Ä–∞–µ–≤—ã—Ö —É—Å–ª–æ–≤–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–∑–≤–µ—Å—Ç–Ω–æ–π –Ω–∞–º —Ñ—É–Ω–∫—Ü–∏–∏ u.</a></li>
<li><a href="https://github.com/optozorax/labs_emf/blob/60b62fb5746aa83e3c52a802d5da1741950b6292/coursework/fem.h#L159">–§—É–Ω–∫—Ü–∏—è —Ä–µ—à–µ–Ω–∏—è –ú–ö–≠.</a></li>
<li><a href="https://github.com/optozorax/labs_emf/blob/60b62fb5746aa83e3c52a802d5da1741950b6292/coursework/main.cpp#L32">–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.</a></li>
</ul>
<h1 id="zakliuchenie"><a class="anchor" href="#zakliuchenie">#</a>–ó–∞–∫–ª—é—á–µ–Ω–∏–µ</h1>
<p>–ë—ã–ª–æ –ø–æ–∫–∞–∑–∞–Ω–æ –∫–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º <code>std::function</code> –ø–æ–∑–≤–æ–ª–∏—Ç –≤–∞–º –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç –ª–∏—à–Ω–µ–≥–æ –∫–æ–ø–∏–ø–∞—Å—Ç–∞ –∏ –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –∏ –¥–∞–Ω–Ω—ã–µ –∏ –≤ –ø—Ä–∏–Ω—Ü–∏–ø–µ —Å–¥–µ–ª–∞—Ç—å –∫–æ–¥ –Ω–∞–º–Ω–æ–≥–æ –±–æ–ª–µ–µ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–º –∏ –∫—Ä–∞—Å–∏–≤—ã–º. –ï—Å–ª–∏ –≤—ã –ø—Ä–∏–¥—É–º–∞–ª–∏ –µ—â—ë –æ–¥–Ω–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ <code>std::function</code>, —Ç–æ –ø–∏—à–∏—Ç–µ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö!</p>

</div>
</article>

  </section>
  

</td><td>
<!-- TOC -->
<input type="checkbox" id="toc-trigger" class="toc-trigger" />
<label for="toc-trigger">
  <span class="menu-icon">
    <div class="side-button"><img src="/ico/right.svg"></div>
  </span>
</label>

<nav class="section-nav">
 <h2>–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ</h2>
 <ul class="first">
 
 
  <li>
   <a href="#stat-ia-ob-ispol-zovanii-std-function">–°—Ç–∞—Ç—å—è –æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ std::function</a>
   
  </li>
 
 
  <li>
   <a href="#vvedenie">–í–≤–µ–¥–µ–Ω–∏–µ</a>
   
  </li>
 
 
  <li>
   <a href="#chislennoe-vychislenie-proizvodnoi">–ß–∏—Å–ª–µ–Ω–Ω–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–æ–π</a>
   
  </li>
 
 
  <li>
   <a href="#primer-ispol-zovaniia-std-bind">–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è std::bind</a>
   
  </li>
 
 
  <li>
   <a href="#avtomaticheskii-raschet-pravoi-chasti">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –ø—Ä–∞–≤–æ–π —á–∞—Å—Ç–∏</a>
   
  </li>
 
 
  <li>
   <a href="#obertka-dlia-podscheta-vyzovov-funktsii">–û–±–µ—Ä—Ç–∫–∞ –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏</a>
   
  </li>
 
 
  <li>
   <a href="#zamer-vremeni">–ó–∞–º–µ—Ä –≤—Ä–µ–º–µ–Ω–∏</a>
   
  </li>
 
 
  <li>
   <a href="#dvoinoi-integral">–î–≤–æ–π–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞–ª</a>
   
  </li>
 
 
  <li>
   <a href="#funktsii-testirovaniia">–§—É–Ω–∫—Ü–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</a>
   
  </li>
 
 
  <li>
   <a href="#odnomernyi-poisk">–û–¥–Ω–æ–º–µ—Ä–Ω—ã–π –ø–æ–∏—Å–∫</a>
   
  </li>
 
 
  <li>
   <a href="#pattern-listener">–ü–∞—Ç—Ç–µ—Ä–Ω listener</a>
   
  </li>
 
 
  <li>
   <a href="#inkapsuliruem-s-pomoshch-iu-std-function">–ò–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ–º —Å –ø–æ–º–æ—â—å—é std::function</a>
   
  </li>
 
 
  <li>
   <a href="#zakliuchenie">–ó–∞–∫–ª—é—á–µ–Ω–∏–µ</a>
   
  </li>
 
 </ul>
</nav>
</td></tr></table>



<!-- comments -->
<hr class="enabled-on-phone">

<table class="toc-aligmenter"><tr><td>

<section class="section second-section">
–ï—Å–ª–∏ –≤–∞–º –Ω—Ä–∞–≤–∏—Ç—Å—è —á—Ç–æ —è –¥–µ–ª–∞—é, —Ç–æ –ø–æ–¥–ø–∏—Å—ã–≤–∞–π—Ç–µ—Å—å –Ω–∞ –º–µ–Ω—è –≤ <a href="https://t.me/optozorax_dev">Telegram</a> –∏ <a href="https://www.youtube.com/c/optozorax">YouTube</a>.
</section>

</td><td>
</td></tr></table>




<!-- comments -->
<hr class="enabled-on-phone">

<table class="toc-aligmenter"><tr><td>

<section class="comments section second-section">

<script src="https://utteranc.es/client.js"
        repo="optozorax/optozorax.github.io"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>

</section>

</td><td>
</td></tr></table>





  <hr class="enabled-on-phone">

  

<table class="toc-aligmenter"><tr><td>


  <footer class="site-footer section second-section">
  
    <center>
    <div style="margin-bottom: 10px;">¬© –®–µ–ø—Ä—É—Ç –ò–ª—å—è. –õ–∏—Ü–µ–Ω–∑–∏—è: <a href="https://creativecommons.org/licenses/by/3.0/deed.ru">CC-BY</a>.</div>
    <table style="border: 0px; display: contents;">
    <tr><td style="border: 0px; padding: 0.2rem;">
    <!-- SVG icons from https://iconmonstr.com -->

    
<span class="my-span-icon">
  <a 
    href="https:&#x2F;&#x2F;github.com&#x2F;optozorax" 
    aria-label="optozorax's GitHub" 
    title="optozorax's GitHub">
    <img 
      class="my-svg-icon" 
      src="/ico/github.svg" 
      width="24" 
      height="24"
      alt="optozorax's GitHub">
  </a>
</span>


    
<span class="my-span-icon">
  <a 
    href="https:&#x2F;&#x2F;t.me&#x2F;optozorax_dev" 
    aria-label="optozorax's Telegram channel" 
    title="optozorax's Telegram channel">
    <img 
      class="my-svg-icon" 
      src="/ico/tg.svg" 
      width="24" 
      height="24"
      alt="optozorax's Telegram channel">
  </a>
</span>


    
<span class="my-span-icon">
  <a 
    href="https:&#x2F;&#x2F;www.youtube.com&#x2F;c&#x2F;optozorax" 
    aria-label="optozorax's YouTube channel" 
    title="optozorax's YouTube channel">
    <img 
      class="my-svg-icon" 
      src="/ico/youtube.svg" 
      width="24" 
      height="24"
      alt="optozorax's YouTube channel">
  </a>
</span>


    
<span class="my-span-icon">
  <a 
    href="https:&#x2F;&#x2F;boosty.to&#x2F;optozorax" 
    aria-label="optozorax's donate page" 
    title="optozorax's donate page">
    <img 
      class="my-svg-icon" 
      src="/ico/donate.svg" 
      width="24" 
      height="24"
      alt="optozorax's donate page">
  </a>
</span>


    
<span class="my-span-icon">
  <a 
    href="&#x2F;atom.xml" 
    aria-label="optozorax's Atom Feed" 
    title="optozorax's Atom Feed">
    <img 
      class="my-svg-icon" 
      src="/ico/rss.svg" 
      width="24" 
      height="24"
      alt="optozorax's Atom Feed">
  </a>
</span>


    
<span class="my-span-icon">
  <a 
    href="mailto:optozorax@gmail.com" 
    aria-label="optozorax's email" 
    title="optozorax's email">
    <img 
      class="my-svg-icon" 
      src="/ico/contact.svg" 
      width="24" 
      height="24"
      alt="optozorax's email">
  </a>
</span>


    </td><td style="border: 0px; padding: 0.2rem;">
    
    <!-- Yandex.Metrika informer -->
    <a href="https://metrika.yandex.ru/stat/?id=53392057&amp;from=informer" target="_blank" rel="nofollkw"><img src="https://informer.yandex.ru/informer/53392057/1_0_35B977FF_159957FF_1_pageviews" style="width:80px; height:15px; border:0; border-radius: 0px; margin-top: -4px; max-height: 100%; max-width: 100%;" alt="–Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞" title="–Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞: –¥–∞–Ω–Ω—ã–µ –∑–∞ —Å–µ–≥–æ–¥–Ω—è (–ø—Ä–æ—Å–º–æ—Ç—Ä—ã)" class="ym-advanced-informer" data-cid="53392057" data-lang="ru" /></a> 
    <!-- /Yandex.Metrika informer -->
    

    </td></tr>
    </table>
    <div class="small-info">
      –°–¥–µ–ª–∞–Ω–æ —Å –ø–æ–º–æ—â—å—é <a href="https://www.getzola.org/">Zola</a> | –ë–∞–∑–∞ —Ç–µ–º—ã <a href="https://github.com/lorepirri/cayman-blog">Cayman Blog</a> | <a href="https://github.com/optozorax/blog_zola">–ò—Å—Ö–æ–¥–Ω–∏–∫–∏ —Å–∞–π—Ç–∞</a>
      <a rel="me" href="https://mathstodon.xyz/@optozorax" style="display: none;">Mastodon</a>
    </div>
    </center>
  
  </footer>
  

</td><td>
</td></tr></table>



  
</body>
</html>